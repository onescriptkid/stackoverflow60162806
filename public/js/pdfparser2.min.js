function countLineBreaks(a,b){var c=a.transform[5]-a.height,d=b.transform[5]-b.height,e=b.transform[5],f=a.height;if(c==d)return 0;if(c-e>=f)return 2;if(b.transform[4]<a.transform[4])return 1;if(b.transform[4]>a.transform[4]){var g=b.transform[4]-a.transform[4];if(b.transform[4]+b.width>a.transform[4]-g)return 1}return b.fontName!=a.fontName?1:b.dir!=a.dir?1:b.height<a.height?1:void 0}function pdfToText(a,b,c){complete=0,PDFJS.getDocument(a).then(function(a){var d=a.numPages;b(0,d);var e={};for(i=1;i<=d;i++)a.getPage(i).then(function(a){var f=a.pageNumber;a.getTextContent().then(function(a){if(null!=a.items){for(var g="",h=null,i=0;i<a.items.length;i++){var j=a.items[i];if(null!=h&&" "!=h.str[h.str.length-1]){for(var k=countLineBreaks(h,j),l=0;l<k;l++)g+="\n";0==k&&h.transform[5]!=j.transform[5]&&null==h.str.match(/^(\s?[a-zA-Z])$|^(.+\s[a-zA-Z])$/)&&(g+=" ")}g+=j.str,h=j}e[f]=g+"\r\n"}++complete,b(complete,d),complete==d&&window.setTimeout(function(){for(var a="",b=Object.keys(e).length,d=1;d<=b;d++)a+=e[d];c(a)},1e3)})})})}PDFJS.workerSrc="/js/pdf.worker.min.js",complete=0;